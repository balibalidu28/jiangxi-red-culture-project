# 江西红色文化展示平台 - 管理端快速上手指南

**适用对象**: 系统管理员、开发人员  
**版本**: v1.0

---

## 快速导航

- [环境配置](#环境配置)
- [启动项目](#启动项目)
- [访问管理后台](#访问管理后台)
- [常用功能](#常用功能)
- [故障排查](#故障排查)

---

## 环境配置

### 1. 必备软件

| 软件 | 版本要求 | 下载地址 |
|-----|---------|---------|
| JDK | 17+ | https://www.oracle.com/java/technologies/downloads/ |
| MySQL | 8.0+ | https://dev.mysql.com/downloads/ |
| Maven | 3.8+ | https://maven.apache.org/download.cgi |
| IDE | IntelliJ IDEA推荐 | https://www.jetbrains.com/idea/ |

### 2. 数据库配置

```sql
-- 创建数据库
CREATE DATABASE red_culture CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 创建用户(可选)
CREATE USER 'redculture'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON red_culture.* TO 'redculture'@'localhost';
FLUSH PRIVILEGES;
```

### 3. 修改配置文件

编辑 `src/main/resources/application.properties`:

```properties
# 数据库连接配置
spring.datasource.url=jdbc:mysql://localhost:3306/red_culture
spring.datasource.username=root
spring.datasource.password=你的密码

# 端口配置
server.port=8080
```

---

## 启动项目

### 方式一: 使用IDE启动

1. 用IntelliJ IDEA打开项目
2. 等待Maven依赖下载完成
3. 找到 `JxRedCultureDisplayApplication.java`
4. 右键 → Run

### 方式二: 使用Maven命令

```bash
# Windows
mvnw.cmd spring-boot:run

# Linux/Mac
./mvnw spring-boot:run
```

### 方式三: 打包后运行

```bash
# 打包
mvn clean package -DskipTests

# 运行
java -jar target/JXRedCultureDisplay-0.0.1-SNAPSHOT.jar
```

### 验证启动成功

浏览器访问: `http://localhost:8080`

看到首页则表示启动成功!

---

## 访问管理后台

### 1. 访问地址

```
http://localhost:8080/admin/dashboard.html
```

### 2. 默认管理员账号

**注意**: 首次启动时会自动初始化管理员账号

```
用户名: admin
密码: admin123
```

**安全提示**: 生产环境请立即修改默认密码!

### 3. 管理后台功能

登录后可以看到6个主要模块:

```
┌─────────────┐
│ 英雄管理     │  管理红色英雄信息
├─────────────┤
│ 故事管理     │  管理红色故事文章
├─────────────┤
│ 圣地管理     │  管理红色旅游景点
├─────────────┤
│ 活动管理     │  管理寻访活动
├─────────────┤
│ 百科管理     │  管理党史百科
├─────────────┤
│ 用户管理     │  管理系统用户
└─────────────┘
```

---

## 常用功能

### 1. 用户管理

#### 添加新用户
1. 点击"用户管理"
2. 点击"新增用户"按钮
3. 填写用户信息:
   - 用户名(必填,唯一)
   - 手机号(必填,11位)
   - 密码(必填,6-20位)
   - 确认密码(必填)
   - 角色(USER/ADMIN)
   - 状态(启用/禁用)
4. 点击"保存"

#### 编辑用户
1. 在用户列表中找到目标用户
2. 点击"编辑"按钮
3. 修改需要更新的信息
4. 点击"保存"

#### 删除用户
1. 在用户列表中找到目标用户
2. 点击"删除"按钮
3. 确认删除操作

### 2. 英雄管理

#### 添加英雄
1. 点击"英雄管理"
2. 点击"新增英雄"按钮
3. 填写英雄信息:
   - 基本信息(姓名*、别名、称号、类别*)
   - 个人信息(性别*、民族、日期等)
   - 内容信息(简介、详细事迹*)
   - 上传图片
4. 点击"保存"

#### 图片上传
- 支持格式: JPG、PNG
- 建议尺寸: 800x600像素
- 最大大小: 5MB
- 点击图片可预览大图

### 3. 活动管理

#### 创建活动
1. 点击"活动管理"
2. 点击"新增活动"按钮
3. 填写活动信息:
   - 基本信息(标题、城市、地点*)
   - 时间设置(开始、结束、截止日期*)
   - 配置参数(人数、状态、主办方*)
   - 上传封面图片
   - 编写活动描述
   - 添加日程安排
   - 上传报名表(可选)
4. 点击"保存"

#### 日程安排
1. 在活动表单中找到"日程安排"部分
2. 填写:
   - 日程标题(如"第一天")
   - 开始时间
   - 结束时间
   - 活动内容
3. 点击"添加"按钮
4. 可添加多个日程项
5. 点击删除按钮可移除日程项

### 4. 文件上传

#### 支持的文件类型
- **图片**: .jpg, .jpeg, .png
- **文档**: .pdf, .doc, .docx, .xls, .xlsx

#### 上传步骤
1. 点击"选择文件"按钮
2. 选择要上传的文件
3. 系统自动上传并显示预览
4. 保存表单时会关联上传的文件

#### 注意事项
- 图片会自动重命名为UUID格式
- 文件保存在 `static/images/` 或 `static/files/` 目录
- 编辑时显示当前图片/文件,点击可查看

---

## 故障排查

### 1. 数据库连接失败

**错误信息**: `Communications link failure`

**解决方案**:
1. 检查MySQL服务是否启动
2. 检查数据库连接配置(用户名、密码、端口)
3. 检查防火墙设置
4. 确认数据库已创建

```bash
# 检查MySQL服务
# Windows
sc query mysql

# Linux
systemctl status mysql
```

### 2. 端口被占用

**错误信息**: `Port 8080 was already in use`

**解决方案**:
1. 修改application.properties中的端口号
2. 或者停止占用8080端口的进程

```bash
# Windows - 查找占用端口的进程
netstat -ano | findstr :8080
taskkill /PID [进程ID] /F

# Linux/Mac
lsof -i :8080
kill -9 [进程ID]
```

### 3. 依赖下载失败

**错误信息**: `Could not resolve dependencies`

**解决方案**:
1. 检查网络连接
2. 配置Maven镜像源(使用阿里云镜像)
3. 删除 `~/.m2/repository` 目录后重新下载

编辑 `~/.m2/settings.xml`:
```xml
<mirror>
  <id>aliyun</id>
  <mirrorOf>central</mirrorOf>
  <url>https://maven.aliyun.com/repository/public</url>
</mirror>
```

### 4. 图片上传失败

**可能原因**:
1. 文件大小超过限制
2. 文件格式不支持
3. 目录权限不足

**解决方案**:
1. 检查文件大小和格式
2. 确保 `static` 目录有写权限
3. 检查控制台错误信息

### 5. 页面样式丢失

**可能原因**:
1. 静态资源路径配置错误
2. CSS/JS文件未正确加载

**解决方案**:
1. 清除浏览器缓存
2. 检查浏览器控制台错误信息
3. 确认静态资源配置正确

```properties
spring.web.resources.static-locations=classpath:/static/
```

---

## 开发提示

### 1. 热重载

使用Spring Boot DevTools实现热重载:

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <optional>true</optional>
</dependency>
```

修改代码后,无需重启应用,自动生效!

### 2. 查看日志

日志级别配置:
```properties
# 全局日志级别
logging.level.root=INFO

# 项目日志级别
logging.level.com.redculture=DEBUG

# SQL日志
spring.jpa.show-sql=true
```

### 3. 数据库调试

使用H2 Console(开发环境):
```properties
spring.h2.console.enabled=true
```

访问: `http://localhost:8080/h2-console`

### 4. API测试

推荐使用Postman或curl进行API测试:

```bash
# 示例: 获取所有用户
curl http://localhost:8080/api/admin/users

# 示例: 创建用户
curl -X POST http://localhost:8080/api/admin/users \
  -H "Content-Type: application/json" \
  -d '{"username":"test","phone":"13800138000","password":"123456"}'
```

---

## 最佳实践

### 1. 密码安全
- ✅ 使用强密码(字母+数字+特殊字符)
- ✅ 定期更换密码
- ✅ 不要在代码中硬编码密码
- ✅ 生产环境禁用默认账号

### 2. 数据备份
```bash
# 备份数据库
mysqldump -u root -p red_culture > backup.sql

# 恢复数据库
mysql -u root -p red_culture < backup.sql
```

### 3. 权限管理
- 普通用户: 只能查看内容
- 管理员: 可以增删改查所有内容
- 超级管理员: 可以管理用户权限

### 4. 性能优化
- 使用分页查询
- 启用数据库索引
- 图片压缩后再上传
- 使用CDN加速静态资源

---

## 常见问题 FAQ

### Q1: 忘记管理员密码怎么办?

**A**: 直接修改数据库:
```sql
-- 重置admin密码为 admin123
UPDATE users 
SET password = '$2a$10$...'  -- BCrypt加密后的密码
WHERE username = 'admin';
```

或者删除用户表,重启应用会自动初始化。

### Q2: 如何批量导入数据?

**A**: 编辑 `src/main/resources/sql/data.sql` 文件,添加INSERT语句,重启应用。

### Q3: 如何部署到生产环境?

**A**: 
1. 修改 `application.properties` 配置
2. 打包: `mvn clean package -DskipTests`
3. 上传jar包到服务器
4. 运行: `nohup java -jar xxx.jar &`

### Q4: 如何修改上传文件大小限制?

**A**: 在 `application.properties` 中添加:
```properties
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
```

---

## 联系支持

遇到问题?

- 📧 邮箱: support@example.com
- 💬 GitHub Issues: https://github.com/xxx/issues
- 📖 完整文档: 见 `docs/` 目录

---

**文档维护**: D组  
**最后更新**: 2024年  
**版本**: v1.0
